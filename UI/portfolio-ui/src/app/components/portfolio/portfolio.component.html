<div *ngIf="isLoading" class="fixed inset-0 flex flex-col items-center justify-center bg-white z-50">
  <i class="fa fa-circle-o-notch fa-spin text-4xl text-blue-600 mb-4"></i>
  <div class="text-gray-700 text-lg font-medium animate-pulse">
    Loading your portfolio...
  </div>
</div>

<div class="dashboard-grid" *ngIf="!isLoading">
  <!-- Header Section -->
  <header class="header">
    <div class="header-left">
      <h1 class="portfolio-title">Portfolio Manager</h1>
    </div>
    <div class="header-center">
      <button (click)="openChat()" class="chat-btn">
        <svg class="chat-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
        </svg>
        <span>Chat with AI</span>
      </button>
      <button (click)="refreshAll()" class="refresh-btn" [class.refreshing]="isRefreshing" title="Refresh all data">
        <svg class="refresh-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8z"/>
        </svg>
        <span>Refresh</span>
      </button>
    </div>
    <div class="header-right">
      <button (click)="logout()" class="logout-btn">
        <svg class="logout-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M17 7l-1.41 1.39L18.17 11H8v2h10.17l-2.58 2.61L17 17l5-5z"/>
          <path d="M4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
        </svg>
        <span>Logout</span>
      </button>
    </div>
  </header>

  <aside class="holdings bg-gray-100">
    <app-holdings></app-holdings>
  </aside>

  <main class="graphs">
    <app-graphs></app-graphs>
  </main>

  <section class="transactions bg-gray-100">
    <app-transactions></app-transactions>
  </section>

  <footer class="market-overview bg-gray-100 h-screen overflow-y-auto">
    <app-market-overview></app-market-overview>
  </footer>
</div>

<app-chat *ngIf="showChat"></app-chat>
